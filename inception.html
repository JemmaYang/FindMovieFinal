<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js" type="text/javascript"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/rateYo/2.3.2/jquery.rateyo.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/rateYo/2.3.2/jquery.rateyo.min.js"></script>

    <link rel="stylesheet" href="public/style.css">

  </head>

  <body>
    <nav class="navbar navbar-inverse">
        <div class="container-fluid">
           <div class="navbar-header">
              <a href="/">
                <img id="logo" src="public/images/logo.png">
                <h1 class="title">Find Your Movie</h1>
              </a>
           </div>
           <div class="nav navbar-nav navbar-right dropdown">
              <div class="signed">Hello! Jemma<img id="signed" src="public/images/me.jpg"></div>
              <a href="profile.html" class="dropdown-content" target="_blank">My Playlist</a>     
           </div>          
        </div>
    </nav>

    <div class="container">
      <div class="col-md-9">
          <h1 class="movieTitle">Inception (2010)</h1>
      </div>
      <div class="row">
         <!-- Right Side -->
         <div class="col-md-8">
            <!-- tailor -->
            <div class="video-container"><iframe src="https://www.youtube.com/embed/8hP9D6kZseM" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>
           
            <div class="row" id="movieContent">
              <div class="col-sm-9">
                <div class="well" id= "introduction">
                  <p>PG-13 | 2h 28min | Action, Adventure, Sci-Fi | 16 July 2010 (USA)</p>
                  <hr>
                
                  <p>Dom Cobb is a skilled thief, the absolute best in the dangerous art of extraction, stealing valuable secrets from deep within the subconscious during the dream state, when the mind is at its most vulnerable. Cobb's rare ability has made him a coveted player in this treacherous new world of corporate espionage, but it has also made him an international fugitive and cost him everything he has ever loved. Now Cobb is being offered a chance at redemption. One last job could give him his life back but only if he can accomplish the impossible - inception. Instead of the perfect heist, Cobb and his team of specialists have to pull off the reverse: their task is not to steal an idea but to plant one. If they succeed, it could be the perfect crime. But no amount of careful planning or expertise can prepare the team for the dangerous enemy that seems to predict their every move. An enemy that only Cobb could have seen coming.</p>
                  <hr>
                
                  <p><b>Director:</b> Christopher Nolan</p>
                  <p><b>Writers:</b> Christopher Nolane</p>
                  <p><b>Stars:</b> Leonardo DiCaprio, Joseph Gordon-Levitt, Ellen Page</p>
                </div>
              </div>

              <div class="col-sm-3">
                <div class="row">
                  <img class="stars" src="public/images/star.png">
                  <div class="IMDBratings">8.8/10</div>
                </div>
               <hr>
                 <div class="row" id="userRated" style="display: none;">
                   <img class="stars" src="public/images/star.png">
                   <div class="IMDBratings">
                      <div id = "userPoints">0.0</div>
                      <div class="user">Your rate</div>
                   </div>  
                </div>
                <div id = "userRatingArea">
                  <div id="rateYo"></div>
                  <button id="getRating" class='btn btn-info'>Give Your Rate</button>
                </div>
                
              </div>
            </div>



            <h3>GIFs</h3>
            <hr>
            <div class="row">
              <div class="col-sm-4">
                  <iframe src="https://giphy.com/embed/mSf4QMJjbvJYI" width=100%  frameBorder="0" class="giphy-embed" allowFullScreen></iframe> 
              </div>

              <div class="col-sm-4">
                  <iframe src="https://giphy.com/embed/1YMFPom6YmRTa" width=100% frameBorder="0" class="giphy-embed" allowFullScreen></iframe>
              </div>

              <div class="col-sm-4">      
                 <iframe src="https://giphy.com/embed/queGWgLKMWS88" width=100% frameBorder="0" class="giphy-embed" allowFullScreen></iframe> 
              </div> 
            </div>

            <div class="row">
              <div class="col-sm-4">
                  <iframe src="https://giphy.com/embed/v31wC4lbF7tm0" width=100%  frameBorder="0" class="giphy-embed" allowFullScreen></iframe>
              </div>

              <div class="col-sm-4">
                  <iframe src="https://giphy.com/embed/qpBIxhwIpQxDq" width=100% frameBorder="0" class="giphy-embed" allowFullScreen></iframe>
              </div>

              <div class="col-sm-4">      
                 <iframe src="https://giphy.com/embed/Zv67CNyOFf6RW" width=100% frameBorder="0" class="giphy-embed" allowFullScreen></iframe>
              </div> 
            </div>

            <hr>

            <div class="row">
              <textarea cols="5" id="tweetContent" placeholder="What do you think about the movie?" maxlength="140"></textarea>
              <img id="postImg" src="public/images/me.jpg">
            </div>
            <div class="row">
              <a class="btn btn-info" id="postTweets" role="button">Post Tweet!</a>
            </div>
        
         </div>
      <!-- End Right Side -->
         
      <!-- Left Side -->
        <div class="col-sm-4">
          <h3>Watch now</h3>
          <!-- <div class="well"> -->
            <a class="btn btn-default" href="https://www.amazon.com/gp/product/B0047WJ11G/ref=atv_feed_catalog?tag=rottetomao_aiv_mv-20" role="button" target="_blank"><img class="icons" src="public/images/amazon.png"></a>
            <a class="btn btn-default" href="http://www.apple.com/itunes/" role="button" target="_blank" disabled><img class="icons" src="public/images/apple.svg"></a>
            <a class="btn btn-default" href="http://www.vudu.com/movies/#!content/182168/Inception" role="button" target="_blank"><img class="icons" src="public/images/vudu.png"></a>
          <!-- </div> -->
          <h3>Add to playlist</h3>
            <a class="btn btn-default" href="#" role="button"><img id="addList" class="icons" src="public/images/plus.png" onclick="saveInfo()"></a>
          <div class="alert success" id="alertBox" style= "display: none;">
              <span id="closebtn">&times;</span>  
              <strong>Success!</strong> You save this movie to playlist.
          </div>
          <hr>

          <h3><img class="icons" src="public/images/twitter.png"> Friends' Reviews</h3>
          <div id="friendComments" class="well">
            <div class="row">
              <div class="profile"><img  src="public/images/mike.jpg" width=100% ></div>
              <div class="content">             
                <div><b>Mike Suskie‏</b> @MikeSuskie</div>
                <div>There was a period after Inception came out when every other movie just seemed so simple-minded.</div> 
              </div>
            </div>
            <hr>
            <div class="row">
              <div class="profile"><img src="public/images/corey.jpg" width=100% ></div>
              <div class="content">
                <div ><b>Corey Motley‏</b> @coreymotley</div>  
                <div>Decided to put on a movie while organizing photos last night. Chose Inception. I still adore that movie so much.</div>
              </div> 
            </div>
            <hr>
            <div class="row">
              <div class="profile"><img src="public/images/ashley.jpg" width=100% ></div>
              <div class="content">
                <div ><b>Ashley Aarts‏</b> @dourknob1</div> 
                <div>Inception's a good movie and all but I honestly have no idea what it's about.</div>
              </div>  
            </div>
            <hr>
            <div class="row">
              <div class="profile"><img src="public/images/jinan.jpg" width=100% ></div>
              <div class="content">
                <div ><b>jinan☁️‏ </b> @idkjinan</div>
                <div>How do people love Inception (the movie) it's so boring and confusing tbh</div>
              </div>  
            </div>
            <hr>
            <div class="row">
              <div class="profile"><img src="public/images/josh.jpg" width=100% ></div>
              <div class="content">
                <div ><b>Josh Henriquez‏</b> @JoshMHenriquez</div>
                <div>Interstellar and Inception are two of my favorite movie scores. Hearing them performed live was incredible.</div>
              </div>  
            </div>
            <hr>
            <div class="row">
              <div class="profile"><img src="public/images/michael.jpg" width=100% ></div>
              <div class="content">
                <div ><b>Michael Scofield‏</b> @TyStopTweeting</div> 
                <div>to me Inception is a sci-fi romance movie</div>
              </div>  
            </div>
          </div> 
          
          <h3><img class="icons" src="public/images/twitter.png"> Public Reviews</h3>
          <div id="publicComments" class="well">
    
          </div> 

        </div>
        <!-- End Left Side -->

      </div>
 
    </div>

    <div id="footer">
      <div class="container">
        <hr>
        <p class="text-muted credit" id="footText">© 2017 Jemma Yang | Find Your Movie</p>
      </div>
    </div>

  </body>
  <script type="text/javascript">
      $.get("/inception", function(tweets) {
        console.log(tweets);
        for (var i=0;i<tweets.length;i++){
            var tweetsContainer = document.getElementById("publicComments");
            var tweetLay = document.createElement('div');
            var imgContainer = document.createElement('a');
            var imgGrid = document.createElement('img');
            var contentLay = document.createElement('div');
            var nameGrid = document.createElement('div');
            var nameNode = document.createTextNode(" @"+tweets[i].user.screen_name);
            var userName = document.createElement('b');
            var userNameNode = document.createTextNode(tweets[i].user.name);
            var Text = document.createElement('div');
            var TextNode = document.createTextNode(tweets[i].text);
            var line = document.createElement('hr');

            Text.appendChild(TextNode);
            userName.appendChild(userNameNode);
            nameGrid.appendChild(userName);
            nameGrid.appendChild(nameNode);
            contentLay.appendChild(nameGrid);
            contentLay.appendChild(Text);
            imgContainer.appendChild(imgGrid);
            tweetLay.appendChild(imgContainer);
            tweetLay.appendChild(contentLay);
            tweetsContainer.appendChild(tweetLay);
            tweetsContainer.appendChild(line);

            tweetLay.setAttribute('class','row');
            imgContainer.setAttribute('class','profile');
            contentLay.setAttribute('class','content');
            imgGrid.setAttribute('src',tweets[i].user.profile_image_url_https);
            imgGrid.setAttribute('width','100%');
            imgContainer.setAttribute('href',tweets[i].user.url)
        }
      });

    function saveInfo(){
      var movieName = "Inception";
      $.get('/save/'+ movieName, function(data) {

          console.log(data);
          var addImg = document.getElementById("addList");
           var index = data.length -1;
          addImg.setAttribute("src", data[index].poster);
          addImg.removeAttribute("onclick");
          
          var alert = document.getElementById("alertBox");
          alert.style.display = "block";
       });
    }

  var close = document.getElementById("closebtn");

  close.onclick = function(){
        var div = this.parentElement;
        div.style.opacity = "0";
        setTimeout(function(){ div.style.display = "none"; }, 600);
    }


$(function () {
 
  $("#rateYo").rateYo({
    maxValue: 10,
    numStars: 5,
    normalFill: "#A0A0A0"
  });
 
});

$(function () {
 
  var $rateYo = $("#rateYo").rateYo();
 
  $("#getRating").click(function () {
 
    var rating = $rateYo.rateYo("rating");
    var points = document.getElementById('userPoints');
    points.innerHTML = rating;

    document.getElementById('userRated').style.display = "block";
    document.getElementById('userRatingArea').style.display = "none";
 
  });
});


$("#postTweets").click(function (){   
   var content = document.getElementById("tweetContent").value;
   console.log(content);
   
   if (content != null){
      var targetContainer = document.getElementById("friendComments");
      var line = document.createElement('hr');
      var newTweet = document.createElement('div');
      var imgContainer = document.createElement('div');
      var profileImg = document.createElement('img');
      var tweetContent = document.createElement('div');
      var tweetName = document.createElement('div');
      var tweetText = document.createElement('div');
      var tweetTextNode = document.createTextNode(content);

      tweetName.innerHTML = "<b>Yajing Yang</b> @Jemma_Yang";
      tweetText.appendChild(tweetTextNode);
      tweetContent.appendChild(tweetName);
      tweetContent.appendChild(tweetText);
      imgContainer.appendChild(profileImg);
      newTweet.appendChild(imgContainer);
      newTweet.appendChild(tweetContent);
      targetContainer.appendChild(line);
      targetContainer.appendChild(newTweet);

      newTweet.setAttribute("class","row");
      imgContainer.setAttribute('class','profile');
      profileImg.setAttribute('src','public/images/me.jpg');
      profileImg.setAttribute('width','100%');
      tweetContent.setAttribute('class','content');

      document.getElementById("tweetContent").value = "";
   }

});


  </script>
</html>